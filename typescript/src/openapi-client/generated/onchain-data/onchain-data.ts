/**
 * Generated by orval v7.6.0 üç∫
 * Do not edit manually.
 * Coinbase Developer Platform APIs
 * The Coinbase Developer Platform APIs - leading the world's transition onchain.
 * OpenAPI spec version: 2.0.0
 */
import type {
  OnchainDataQuery,
  OnchainDataResult,
} from "../coinbaseDeveloperPlatformAPIs.schemas.js";

import { cdpApiClient } from "../../cdpApiClient.js";

type SecondParameter<T extends (...args: never) => unknown> = Parameters<T>[1];

/**
 * Run a read-only SQL query against indexed blockchain data including transactions, events, and decoded logs.

This endpoint provides direct SQL access to comprehensive blockchain data across supported networks.
Queries are executed against optimized data structures for high-performance analytics.

**Query Limitations:**
- Read-only queries only (SELECT statements)
- No DDL or DML operations allowed
- Standard SQL syntax (ClickHouse dialect)
- No cartesian products

### Supported Tables

- `base.events` - Base mainnet decoded event logs with contract interactions
- `base.transactions` - Base mainnet transaction data including hash, block number, gas usage
- `base.blocks` - Base mainnet block metadata including timestamps and difficulty

### Query Limits

- Maximum result set: 10,000 rows
- Query timeout: 30 seconds
- Maximum JOINs: 5

 * @summary Run SQL against decoded onchain data
 */
export const runSQLQuery = (
  onchainDataQuery: OnchainDataQuery,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<OnchainDataResult>(
    {
      url: `/v2/data/query/run`,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      data: onchainDataQuery,
    },
    options,
  );
};
export type RunSQLQueryResult = NonNullable<Awaited<ReturnType<typeof runSQLQuery>>>;
