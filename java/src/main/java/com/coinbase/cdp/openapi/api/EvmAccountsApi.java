/*
 * Coinbase Developer Platform APIs
 * The Coinbase Developer Platform APIs - leading the world's transition onchain.
 *
 * The version of the OpenAPI document: 2.0.0
 * Contact: cdp@coinbase.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package com.coinbase.cdp.openapi.api;

import com.coinbase.cdp.openapi.ApiClient;
import com.coinbase.cdp.openapi.ApiException;
import com.coinbase.cdp.openapi.ApiResponse;
import com.coinbase.cdp.openapi.Pair;

import com.coinbase.cdp.openapi.model.CreateEvmAccountRequest;
import com.coinbase.cdp.openapi.model.EIP712Message;
import com.coinbase.cdp.openapi.model.Error;
import com.coinbase.cdp.openapi.model.EvmAccount;
import com.coinbase.cdp.openapi.model.ExportEvmAccount200Response;
import com.coinbase.cdp.openapi.model.ExportEvmAccountRequest;
import com.coinbase.cdp.openapi.model.ImportEvmAccountRequest;
import com.coinbase.cdp.openapi.model.ListEvmAccounts200Response;
import com.coinbase.cdp.openapi.model.SendEvmTransaction200Response;
import com.coinbase.cdp.openapi.model.SendEvmTransactionRequest;
import com.coinbase.cdp.openapi.model.SignEvmHash200Response;
import com.coinbase.cdp.openapi.model.SignEvmHashRequest;
import com.coinbase.cdp.openapi.model.SignEvmMessage200Response;
import com.coinbase.cdp.openapi.model.SignEvmMessageRequest;
import com.coinbase.cdp.openapi.model.SignEvmTransaction200Response;
import com.coinbase.cdp.openapi.model.SignEvmTransactionRequest;
import com.coinbase.cdp.openapi.model.SignEvmTypedData200Response;
import com.coinbase.cdp.openapi.model.UpdateEvmAccountRequest;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.InputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.net.http.HttpRequest;
import java.nio.channels.Channels;
import java.nio.channels.Pipe;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;

import java.util.ArrayList;
import java.util.StringJoiner;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.function.Consumer;

@jakarta.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", comments = "Generator version: 7.11.0")
public class EvmAccountsApi {
  private final HttpClient memberVarHttpClient;
  private final ObjectMapper memberVarObjectMapper;
  private final String memberVarBaseUri;
  private final Consumer<HttpRequest.Builder> memberVarInterceptor;
  private final Duration memberVarReadTimeout;
  private final Consumer<HttpResponse<InputStream>> memberVarResponseInterceptor;
  private final Consumer<HttpResponse<String>> memberVarAsyncResponseInterceptor;

  public EvmAccountsApi() {
    this(new ApiClient());
  }

  public EvmAccountsApi(ApiClient apiClient) {
    memberVarHttpClient = apiClient.getHttpClient();
    memberVarObjectMapper = apiClient.getObjectMapper();
    memberVarBaseUri = apiClient.getBaseUri();
    memberVarInterceptor = apiClient.getRequestInterceptor();
    memberVarReadTimeout = apiClient.getReadTimeout();
    memberVarResponseInterceptor = apiClient.getResponseInterceptor();
    memberVarAsyncResponseInterceptor = apiClient.getAsyncResponseInterceptor();
  }

  protected ApiException getApiException(String operationId, HttpResponse<InputStream> response) throws IOException {
    String body = response.body() == null ? null : new String(response.body().readAllBytes());
    String message = formatExceptionMessage(operationId, response.statusCode(), body);
    return new ApiException(response.statusCode(), message, response.headers(), body);
  }

  private String formatExceptionMessage(String operationId, int statusCode, String body) {
    if (body == null || body.isEmpty()) {
      body = "[no body]";
    }
    return operationId + " call failed with: " + statusCode + " - " + body;
  }

  /**
   * Create an EVM account
   * Creates a new EVM account.
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param createEvmAccountRequest  (optional)
   * @return EvmAccount
   * @throws ApiException if fails to make API call
   */
  public EvmAccount createEvmAccount(String xWalletAuth, String xIdempotencyKey, CreateEvmAccountRequest createEvmAccountRequest) throws ApiException {
    ApiResponse<EvmAccount> localVarResponse = createEvmAccountWithHttpInfo(xWalletAuth, xIdempotencyKey, createEvmAccountRequest);
    return localVarResponse.getData();
  }

  /**
   * Create an EVM account
   * Creates a new EVM account.
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param createEvmAccountRequest  (optional)
   * @return ApiResponse&lt;EvmAccount&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<EvmAccount> createEvmAccountWithHttpInfo(String xWalletAuth, String xIdempotencyKey, CreateEvmAccountRequest createEvmAccountRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = createEvmAccountRequestBuilder(xWalletAuth, xIdempotencyKey, createEvmAccountRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("createEvmAccount", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<EvmAccount>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<EvmAccount>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<EvmAccount>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder createEvmAccountRequestBuilder(String xWalletAuth, String xIdempotencyKey, CreateEvmAccountRequest createEvmAccountRequest) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts";

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(createEvmAccountRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Export an EVM account
   * Export an existing EVM account&#39;s private key. It is important to store the private key in a secure place after it&#39;s exported.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param exportEvmAccountRequest  (optional)
   * @return ExportEvmAccount200Response
   * @throws ApiException if fails to make API call
   */
  public ExportEvmAccount200Response exportEvmAccount(String address, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    ApiResponse<ExportEvmAccount200Response> localVarResponse = exportEvmAccountWithHttpInfo(address, xWalletAuth, xIdempotencyKey, exportEvmAccountRequest);
    return localVarResponse.getData();
  }

  /**
   * Export an EVM account
   * Export an existing EVM account&#39;s private key. It is important to store the private key in a secure place after it&#39;s exported.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param exportEvmAccountRequest  (optional)
   * @return ApiResponse&lt;ExportEvmAccount200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<ExportEvmAccount200Response> exportEvmAccountWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = exportEvmAccountRequestBuilder(address, xWalletAuth, xIdempotencyKey, exportEvmAccountRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("exportEvmAccount", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<ExportEvmAccount200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<ExportEvmAccount200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<ExportEvmAccount200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder exportEvmAccountRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling exportEvmAccount");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/export"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(exportEvmAccountRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Export an EVM account by name
   * Export an existing EVM account&#39;s private key by its name. It is important to store the private key in a secure place after it&#39;s exported.
   * @param name The name of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param exportEvmAccountRequest  (optional)
   * @return ExportEvmAccount200Response
   * @throws ApiException if fails to make API call
   */
  public ExportEvmAccount200Response exportEvmAccountByName(String name, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    ApiResponse<ExportEvmAccount200Response> localVarResponse = exportEvmAccountByNameWithHttpInfo(name, xWalletAuth, xIdempotencyKey, exportEvmAccountRequest);
    return localVarResponse.getData();
  }

  /**
   * Export an EVM account by name
   * Export an existing EVM account&#39;s private key by its name. It is important to store the private key in a secure place after it&#39;s exported.
   * @param name The name of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param exportEvmAccountRequest  (optional)
   * @return ApiResponse&lt;ExportEvmAccount200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<ExportEvmAccount200Response> exportEvmAccountByNameWithHttpInfo(String name, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = exportEvmAccountByNameRequestBuilder(name, xWalletAuth, xIdempotencyKey, exportEvmAccountRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("exportEvmAccountByName", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<ExportEvmAccount200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<ExportEvmAccount200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<ExportEvmAccount200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder exportEvmAccountByNameRequestBuilder(String name, String xWalletAuth, String xIdempotencyKey, ExportEvmAccountRequest exportEvmAccountRequest) throws ApiException {
    // verify the required parameter 'name' is set
    if (name == null) {
      throw new ApiException(400, "Missing the required parameter 'name' when calling exportEvmAccountByName");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/export/by-name/{name}"
        .replace("{name}", ApiClient.urlEncode(name.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(exportEvmAccountRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Get an EVM account by address
   * Gets an EVM account by its address.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @return EvmAccount
   * @throws ApiException if fails to make API call
   */
  public EvmAccount getEvmAccount(String address) throws ApiException {
    ApiResponse<EvmAccount> localVarResponse = getEvmAccountWithHttpInfo(address);
    return localVarResponse.getData();
  }

  /**
   * Get an EVM account by address
   * Gets an EVM account by its address.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @return ApiResponse&lt;EvmAccount&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<EvmAccount> getEvmAccountWithHttpInfo(String address) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = getEvmAccountRequestBuilder(address);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("getEvmAccount", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<EvmAccount>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<EvmAccount>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<EvmAccount>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder getEvmAccountRequestBuilder(String address) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling getEvmAccount");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Get an EVM account by name
   * Gets an EVM account by its name.
   * @param name The name of the EVM account. (required)
   * @return EvmAccount
   * @throws ApiException if fails to make API call
   */
  public EvmAccount getEvmAccountByName(String name) throws ApiException {
    ApiResponse<EvmAccount> localVarResponse = getEvmAccountByNameWithHttpInfo(name);
    return localVarResponse.getData();
  }

  /**
   * Get an EVM account by name
   * Gets an EVM account by its name.
   * @param name The name of the EVM account. (required)
   * @return ApiResponse&lt;EvmAccount&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<EvmAccount> getEvmAccountByNameWithHttpInfo(String name) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = getEvmAccountByNameRequestBuilder(name);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("getEvmAccountByName", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<EvmAccount>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<EvmAccount>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<EvmAccount>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder getEvmAccountByNameRequestBuilder(String name) throws ApiException {
    // verify the required parameter 'name' is set
    if (name == null) {
      throw new ApiException(400, "Missing the required parameter 'name' when calling getEvmAccountByName");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/by-name/{name}"
        .replace("{name}", ApiClient.urlEncode(name.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Import an EVM account
   * Import an existing EVM account into the developer&#39;s CDP Project. This API should be called from the [CDP SDK](https://github.com/coinbase/cdp-sdk) to ensure that the associated private key is properly encrypted.
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param importEvmAccountRequest  (optional)
   * @return EvmAccount
   * @throws ApiException if fails to make API call
   */
  public EvmAccount importEvmAccount(String xWalletAuth, String xIdempotencyKey, ImportEvmAccountRequest importEvmAccountRequest) throws ApiException {
    ApiResponse<EvmAccount> localVarResponse = importEvmAccountWithHttpInfo(xWalletAuth, xIdempotencyKey, importEvmAccountRequest);
    return localVarResponse.getData();
  }

  /**
   * Import an EVM account
   * Import an existing EVM account into the developer&#39;s CDP Project. This API should be called from the [CDP SDK](https://github.com/coinbase/cdp-sdk) to ensure that the associated private key is properly encrypted.
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param importEvmAccountRequest  (optional)
   * @return ApiResponse&lt;EvmAccount&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<EvmAccount> importEvmAccountWithHttpInfo(String xWalletAuth, String xIdempotencyKey, ImportEvmAccountRequest importEvmAccountRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = importEvmAccountRequestBuilder(xWalletAuth, xIdempotencyKey, importEvmAccountRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("importEvmAccount", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<EvmAccount>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<EvmAccount>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<EvmAccount>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder importEvmAccountRequestBuilder(String xWalletAuth, String xIdempotencyKey, ImportEvmAccountRequest importEvmAccountRequest) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/import";

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(importEvmAccountRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * List EVM accounts
   * Lists the EVM accounts belonging to the developer&#39;s CDP Project. The response is paginated, and by default, returns 20 accounts per page.
   * @param pageSize The number of resources to return per page. (optional, default to 20)
   * @param pageToken The token for the next page of resources, if any. (optional)
   * @return ListEvmAccounts200Response
   * @throws ApiException if fails to make API call
   */
  public ListEvmAccounts200Response listEvmAccounts(Integer pageSize, String pageToken) throws ApiException {
    ApiResponse<ListEvmAccounts200Response> localVarResponse = listEvmAccountsWithHttpInfo(pageSize, pageToken);
    return localVarResponse.getData();
  }

  /**
   * List EVM accounts
   * Lists the EVM accounts belonging to the developer&#39;s CDP Project. The response is paginated, and by default, returns 20 accounts per page.
   * @param pageSize The number of resources to return per page. (optional, default to 20)
   * @param pageToken The token for the next page of resources, if any. (optional)
   * @return ApiResponse&lt;ListEvmAccounts200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<ListEvmAccounts200Response> listEvmAccountsWithHttpInfo(Integer pageSize, String pageToken) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = listEvmAccountsRequestBuilder(pageSize, pageToken);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("listEvmAccounts", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<ListEvmAccounts200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<ListEvmAccounts200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<ListEvmAccounts200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder listEvmAccountsRequestBuilder(Integer pageSize, String pageToken) throws ApiException {

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts";

    List<Pair> localVarQueryParams = new ArrayList<>();
    StringJoiner localVarQueryStringJoiner = new StringJoiner("&");
    String localVarQueryParameterBaseName;
    localVarQueryParameterBaseName = "pageSize";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("pageSize", pageSize));
    localVarQueryParameterBaseName = "pageToken";
    localVarQueryParams.addAll(ApiClient.parameterToPairs("pageToken", pageToken));

    if (!localVarQueryParams.isEmpty() || localVarQueryStringJoiner.length() != 0) {
      StringJoiner queryJoiner = new StringJoiner("&");
      localVarQueryParams.forEach(p -> queryJoiner.add(p.getName() + '=' + p.getValue()));
      if (localVarQueryStringJoiner.length() != 0) {
        queryJoiner.add(localVarQueryStringJoiner.toString());
      }
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath + '?' + queryJoiner.toString()));
    } else {
      localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));
    }

    localVarRequestBuilder.header("Accept", "application/json");

    localVarRequestBuilder.method("GET", HttpRequest.BodyPublishers.noBody());
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Send a transaction
   * Signs a transaction with the given EVM account and sends it to the indicated supported network. This API handles nonce management and gas estimation, leaving the developer to provide only the minimal set of fields necessary to send the transaction. The transaction should be serialized as a hex string using [RLP](https://ethereum.org/en/developers/docs/data-structures-and-encoding/rlp/).  The transaction must be an [EIP-1559 dynamic fee transaction](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md).   **Transaction fields and API behavior**  - &#x60;to&#x60; *(Required)*: The address of the contract or account to send the transaction to. - &#x60;chainId&#x60; *(Ignored)*: The value of the &#x60;chainId&#x60; field in the transaction is ignored.   The transaction will be sent to the network indicated by the &#x60;network&#x60; field in the request body.  - &#x60;nonce&#x60; *(Optional)*: The nonce to use for the transaction. If not provided, the API will assign    a nonce to the transaction based on the current state of the account.  - &#x60;maxPriorityFeePerGas&#x60; *(Optional)*: The maximum priority fee per gas to use for the transaction.    If not provided, the API will estimate a value based on current network conditions.  - &#x60;maxFeePerGas&#x60; *(Optional)*: The maximum fee per gas to use for the transaction.    If not provided, the API will estimate a value based on current network conditions.  - &#x60;gasLimit&#x60; *(Optional)*: The gas limit to use for the transaction. If not provided, the API will estimate a value   based on the &#x60;to&#x60; and &#x60;data&#x60; fields of the transaction.  - &#x60;value&#x60; *(Optional)*: The amount of ETH, in wei, to send with the transaction. - &#x60;data&#x60; *(Optional)*: The data to send with the transaction; only used for contract calls. - &#x60;accessList&#x60; *(Optional)*: The access list to use for the transaction.
   * @param address The 0x-prefixed address of the Ethereum account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param sendEvmTransactionRequest  (optional)
   * @return SendEvmTransaction200Response
   * @throws ApiException if fails to make API call
   */
  public SendEvmTransaction200Response sendEvmTransaction(String address, String xWalletAuth, String xIdempotencyKey, SendEvmTransactionRequest sendEvmTransactionRequest) throws ApiException {
    ApiResponse<SendEvmTransaction200Response> localVarResponse = sendEvmTransactionWithHttpInfo(address, xWalletAuth, xIdempotencyKey, sendEvmTransactionRequest);
    return localVarResponse.getData();
  }

  /**
   * Send a transaction
   * Signs a transaction with the given EVM account and sends it to the indicated supported network. This API handles nonce management and gas estimation, leaving the developer to provide only the minimal set of fields necessary to send the transaction. The transaction should be serialized as a hex string using [RLP](https://ethereum.org/en/developers/docs/data-structures-and-encoding/rlp/).  The transaction must be an [EIP-1559 dynamic fee transaction](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md).   **Transaction fields and API behavior**  - &#x60;to&#x60; *(Required)*: The address of the contract or account to send the transaction to. - &#x60;chainId&#x60; *(Ignored)*: The value of the &#x60;chainId&#x60; field in the transaction is ignored.   The transaction will be sent to the network indicated by the &#x60;network&#x60; field in the request body.  - &#x60;nonce&#x60; *(Optional)*: The nonce to use for the transaction. If not provided, the API will assign    a nonce to the transaction based on the current state of the account.  - &#x60;maxPriorityFeePerGas&#x60; *(Optional)*: The maximum priority fee per gas to use for the transaction.    If not provided, the API will estimate a value based on current network conditions.  - &#x60;maxFeePerGas&#x60; *(Optional)*: The maximum fee per gas to use for the transaction.    If not provided, the API will estimate a value based on current network conditions.  - &#x60;gasLimit&#x60; *(Optional)*: The gas limit to use for the transaction. If not provided, the API will estimate a value   based on the &#x60;to&#x60; and &#x60;data&#x60; fields of the transaction.  - &#x60;value&#x60; *(Optional)*: The amount of ETH, in wei, to send with the transaction. - &#x60;data&#x60; *(Optional)*: The data to send with the transaction; only used for contract calls. - &#x60;accessList&#x60; *(Optional)*: The access list to use for the transaction.
   * @param address The 0x-prefixed address of the Ethereum account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param sendEvmTransactionRequest  (optional)
   * @return ApiResponse&lt;SendEvmTransaction200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<SendEvmTransaction200Response> sendEvmTransactionWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, SendEvmTransactionRequest sendEvmTransactionRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = sendEvmTransactionRequestBuilder(address, xWalletAuth, xIdempotencyKey, sendEvmTransactionRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("sendEvmTransaction", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<SendEvmTransaction200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<SendEvmTransaction200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<SendEvmTransaction200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder sendEvmTransactionRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, SendEvmTransactionRequest sendEvmTransactionRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling sendEvmTransaction");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/send/transaction"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(sendEvmTransactionRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Sign a hash
   * Signs an arbitrary 32 byte hash with the given EVM account.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmHashRequest  (optional)
   * @return SignEvmHash200Response
   * @throws ApiException if fails to make API call
   */
  public SignEvmHash200Response signEvmHash(String address, String xWalletAuth, String xIdempotencyKey, SignEvmHashRequest signEvmHashRequest) throws ApiException {
    ApiResponse<SignEvmHash200Response> localVarResponse = signEvmHashWithHttpInfo(address, xWalletAuth, xIdempotencyKey, signEvmHashRequest);
    return localVarResponse.getData();
  }

  /**
   * Sign a hash
   * Signs an arbitrary 32 byte hash with the given EVM account.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmHashRequest  (optional)
   * @return ApiResponse&lt;SignEvmHash200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<SignEvmHash200Response> signEvmHashWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, SignEvmHashRequest signEvmHashRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = signEvmHashRequestBuilder(address, xWalletAuth, xIdempotencyKey, signEvmHashRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("signEvmHash", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<SignEvmHash200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<SignEvmHash200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<SignEvmHash200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder signEvmHashRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, SignEvmHashRequest signEvmHashRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling signEvmHash");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/sign"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(signEvmHashRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Sign an EIP-191 message
   * Signs an [EIP-191](https://eips.ethereum.org/EIPS/eip-191) message with the given EVM account.  Per the specification, the message in the request body is prepended with &#x60;0x19 &lt;0x45 (E)&gt; &lt;thereum Signed Message:\\n\&quot; + len(message)&gt;&#x60; before being signed.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmMessageRequest  (optional)
   * @return SignEvmMessage200Response
   * @throws ApiException if fails to make API call
   */
  public SignEvmMessage200Response signEvmMessage(String address, String xWalletAuth, String xIdempotencyKey, SignEvmMessageRequest signEvmMessageRequest) throws ApiException {
    ApiResponse<SignEvmMessage200Response> localVarResponse = signEvmMessageWithHttpInfo(address, xWalletAuth, xIdempotencyKey, signEvmMessageRequest);
    return localVarResponse.getData();
  }

  /**
   * Sign an EIP-191 message
   * Signs an [EIP-191](https://eips.ethereum.org/EIPS/eip-191) message with the given EVM account.  Per the specification, the message in the request body is prepended with &#x60;0x19 &lt;0x45 (E)&gt; &lt;thereum Signed Message:\\n\&quot; + len(message)&gt;&#x60; before being signed.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmMessageRequest  (optional)
   * @return ApiResponse&lt;SignEvmMessage200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<SignEvmMessage200Response> signEvmMessageWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, SignEvmMessageRequest signEvmMessageRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = signEvmMessageRequestBuilder(address, xWalletAuth, xIdempotencyKey, signEvmMessageRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("signEvmMessage", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<SignEvmMessage200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<SignEvmMessage200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<SignEvmMessage200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder signEvmMessageRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, SignEvmMessageRequest signEvmMessageRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling signEvmMessage");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/sign/message"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(signEvmMessageRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Sign a transaction
   * Signs a transaction with the given EVM account. The transaction should be serialized as a hex string using [RLP](https://ethereum.org/en/developers/docs/data-structures-and-encoding/rlp/).  The transaction must be an [EIP-1559 dynamic fee transaction](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md). The developer is responsible for ensuring that the unsigned transaction is valid, as the API will not validate the transaction.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmTransactionRequest  (optional)
   * @return SignEvmTransaction200Response
   * @throws ApiException if fails to make API call
   */
  public SignEvmTransaction200Response signEvmTransaction(String address, String xWalletAuth, String xIdempotencyKey, SignEvmTransactionRequest signEvmTransactionRequest) throws ApiException {
    ApiResponse<SignEvmTransaction200Response> localVarResponse = signEvmTransactionWithHttpInfo(address, xWalletAuth, xIdempotencyKey, signEvmTransactionRequest);
    return localVarResponse.getData();
  }

  /**
   * Sign a transaction
   * Signs a transaction with the given EVM account. The transaction should be serialized as a hex string using [RLP](https://ethereum.org/en/developers/docs/data-structures-and-encoding/rlp/).  The transaction must be an [EIP-1559 dynamic fee transaction](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md). The developer is responsible for ensuring that the unsigned transaction is valid, as the API will not validate the transaction.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param signEvmTransactionRequest  (optional)
   * @return ApiResponse&lt;SignEvmTransaction200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<SignEvmTransaction200Response> signEvmTransactionWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, SignEvmTransactionRequest signEvmTransactionRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = signEvmTransactionRequestBuilder(address, xWalletAuth, xIdempotencyKey, signEvmTransactionRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("signEvmTransaction", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<SignEvmTransaction200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<SignEvmTransaction200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<SignEvmTransaction200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder signEvmTransactionRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, SignEvmTransactionRequest signEvmTransactionRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling signEvmTransaction");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/sign/transaction"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(signEvmTransactionRequest);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Sign EIP-712 typed data
   * Signs [EIP-712](https://eips.ethereum.org/EIPS/eip-712) typed data with the given EVM account.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param eiP712Message  (optional)
   * @return SignEvmTypedData200Response
   * @throws ApiException if fails to make API call
   */
  public SignEvmTypedData200Response signEvmTypedData(String address, String xWalletAuth, String xIdempotencyKey, EIP712Message eiP712Message) throws ApiException {
    ApiResponse<SignEvmTypedData200Response> localVarResponse = signEvmTypedDataWithHttpInfo(address, xWalletAuth, xIdempotencyKey, eiP712Message);
    return localVarResponse.getData();
  }

  /**
   * Sign EIP-712 typed data
   * Signs [EIP-712](https://eips.ethereum.org/EIPS/eip-712) typed data with the given EVM account.
   * @param address The 0x-prefixed address of the EVM account. (required)
   * @param xWalletAuth A JWT signed using your Wallet Secret, encoded in base64. Refer to the [Generate Wallet Token](https://docs.cdp.coinbase.com/api-reference/v2/authentication#2-generate-wallet-token) section of our Authentication docs for more details on how to generate your Wallet Token.  (optional)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param eiP712Message  (optional)
   * @return ApiResponse&lt;SignEvmTypedData200Response&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<SignEvmTypedData200Response> signEvmTypedDataWithHttpInfo(String address, String xWalletAuth, String xIdempotencyKey, EIP712Message eiP712Message) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = signEvmTypedDataRequestBuilder(address, xWalletAuth, xIdempotencyKey, eiP712Message);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("signEvmTypedData", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<SignEvmTypedData200Response>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<SignEvmTypedData200Response>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<SignEvmTypedData200Response>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder signEvmTypedDataRequestBuilder(String address, String xWalletAuth, String xIdempotencyKey, EIP712Message eiP712Message) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling signEvmTypedData");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}/sign/typed-data"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xWalletAuth != null) {
      localVarRequestBuilder.header("X-Wallet-Auth", xWalletAuth.toString());
    }
    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(eiP712Message);
      localVarRequestBuilder.method("POST", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

  /**
   * Update an EVM account
   * Updates an existing EVM account. Use this to update the account&#39;s name or account-level policy.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param updateEvmAccountRequest  (optional)
   * @return EvmAccount
   * @throws ApiException if fails to make API call
   */
  public EvmAccount updateEvmAccount(String address, String xIdempotencyKey, UpdateEvmAccountRequest updateEvmAccountRequest) throws ApiException {
    ApiResponse<EvmAccount> localVarResponse = updateEvmAccountWithHttpInfo(address, xIdempotencyKey, updateEvmAccountRequest);
    return localVarResponse.getData();
  }

  /**
   * Update an EVM account
   * Updates an existing EVM account. Use this to update the account&#39;s name or account-level policy.
   * @param address The 0x-prefixed address of the EVM account. The address does not need to be checksummed. (required)
   * @param xIdempotencyKey An optional [UUID v4](https://www.uuidgenerator.net/version4) request header for making requests safely retryable. When included, duplicate requests with the same key will return identical responses.  Refer to our [Idempotency docs](https://docs.cdp.coinbase.com/api-reference/v2/idempotency) for more information on using idempotency keys.  (optional)
   * @param updateEvmAccountRequest  (optional)
   * @return ApiResponse&lt;EvmAccount&gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse<EvmAccount> updateEvmAccountWithHttpInfo(String address, String xIdempotencyKey, UpdateEvmAccountRequest updateEvmAccountRequest) throws ApiException {
    HttpRequest.Builder localVarRequestBuilder = updateEvmAccountRequestBuilder(address, xIdempotencyKey, updateEvmAccountRequest);
    try {
      HttpResponse<InputStream> localVarResponse = memberVarHttpClient.send(
          localVarRequestBuilder.build(),
          HttpResponse.BodyHandlers.ofInputStream());
      if (memberVarResponseInterceptor != null) {
        memberVarResponseInterceptor.accept(localVarResponse);
      }
      try {
        if (localVarResponse.statusCode()/ 100 != 2) {
          throw getApiException("updateEvmAccount", localVarResponse);
        }
        if (localVarResponse.body() == null) {
          return new ApiResponse<EvmAccount>(
              localVarResponse.statusCode(),
              localVarResponse.headers().map(),
              null
          );
        }

        String responseBody = new String(localVarResponse.body().readAllBytes());
        localVarResponse.body().close();

        return new ApiResponse<EvmAccount>(
            localVarResponse.statusCode(),
            localVarResponse.headers().map(),
            responseBody.isBlank()? null: memberVarObjectMapper.readValue(responseBody, new TypeReference<EvmAccount>() {})
        );
      } finally {
      }
    } catch (IOException e) {
      throw new ApiException(e);
    }
    catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new ApiException(e);
    }
  }

  private HttpRequest.Builder updateEvmAccountRequestBuilder(String address, String xIdempotencyKey, UpdateEvmAccountRequest updateEvmAccountRequest) throws ApiException {
    // verify the required parameter 'address' is set
    if (address == null) {
      throw new ApiException(400, "Missing the required parameter 'address' when calling updateEvmAccount");
    }

    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();

    String localVarPath = "/v2/evm/accounts/{address}"
        .replace("{address}", ApiClient.urlEncode(address.toString()));

    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));

    if (xIdempotencyKey != null) {
      localVarRequestBuilder.header("X-Idempotency-Key", xIdempotencyKey.toString());
    }
    localVarRequestBuilder.header("Content-Type", "application/json");
    localVarRequestBuilder.header("Accept", "application/json");

    try {
      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(updateEvmAccountRequest);
      localVarRequestBuilder.method("PUT", HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));
    } catch (IOException e) {
      throw new ApiException(e);
    }
    if (memberVarReadTimeout != null) {
      localVarRequestBuilder.timeout(memberVarReadTimeout);
    }
    if (memberVarInterceptor != null) {
      memberVarInterceptor.accept(localVarRequestBuilder);
    }
    return localVarRequestBuilder;
  }

}
